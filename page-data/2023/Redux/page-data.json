{"componentChunkName":"component---src-templates-blog-post-js","path":"/2023/Redux/","result":{"data":{"site":{"siteMetadata":{"title":"cozups-log"}},"markdownRemark":{"id":"d5fd7095-ff84-5b46-8a40-152fb1101d9c","excerpt":"참고: https://www.udemy.com/course/best-react/ State의 종류 local state State that belongs to a single component 하나의 컴포넌트에 속한 state ex) input field…","html":"<p>참고: <a href=\"https://www.udemy.com/course/best-react/\">https://www.udemy.com/course/best-react/</a></p>\n<h1>State의 종류</h1>\n<ul>\n<li><strong>local state</strong>\n<ul>\n<li>State that belongs to a single component</li>\n<li>하나의 컴포넌트에 속한 state\n<ul>\n<li>ex) input field에서 사용자 인풋을 받을 때</li>\n</ul>\n</li>\n<li>useState, useReducer</li>\n</ul>\n</li>\n<li><strong>cross-component state</strong>\n<ul>\n<li>State that affects multiple components</li>\n<li>다수의 컴포넌트에 영향을 미치는 state\n<ul>\n<li>ex) 모달 오버레이의 open/close 상태</li>\n</ul>\n</li>\n<li>prop chains / prop drilling</li>\n</ul>\n</li>\n<li><strong>app-wide state</strong>\n<ul>\n<li>State that affects the entire app</li>\n<li>앱 전체에 영향을 미치는 state\n<ul>\n<li>ex) 사용자 인증(user authentication status)</li>\n</ul>\n</li>\n<li>prop chains / prop drilling</li>\n</ul>\n</li>\n</ul>\n<p>Context API나 Redux가 cross-component state와 app-wide state 관리를 도와준다.</p>\n<hr>\n<h1>Context가 있는데 Redux는 왜 필요할까?</h1>\n<h2>React Context의 (잠재적) 단점</h2>\n<ul>\n<li>complex setup/management\n<ul>\n<li>엔터프라이즈급 대형 프로젝트에서 ContextProvider가 여러 개 중첩되는 형태의 코드가 작성될 수 있다.</li>\n<li>하나의 ContextProvider만 사용하여 관리할 수 있지만 이 경우, 하나의 컨텍스트에서 많은 것들을 관리하므로 그 자체를 유지하고 관리하기 힘들다.</li>\n</ul>\n</li>\n<li>performance\n<ul>\n<li>state가 자주 변경되는 경우 성능이 저하된다.</li>\n<li>모든 시나리오에서 리덕스를 대체할 수 있을만한 성능은 아니다.</li>\n</ul>\n</li>\n</ul>\n<p>⇒ React Context의 대안으로 Redux를 사용한다.</p>\n<hr>\n<h1>Redux 작동 방식</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/41fc049c70ef42127266d3ebfcf21164/e80ac/redux1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.835443037974684%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/klEQVR42nWSS29SQRiG2RrbIndbtdSKtEJpgXODlnM4PUChGFouCqWQBi8x6kKT6qJbF6bWC6nR6B8wWI3xZ5jYnf4T9yaPw0nqRlk8mclk5vnme/M5FLfCkGXPMobXwPRlSbk0GrMNPq0MODI/cpQdMDA/8DXzhUfxXYyATit8nW58m51kl26iI/YdSmeLOGS3jObRsPwWuUCOYmBNiHUqwQoHyX0O0s94lXphr335Jbejt1idNKnNVOkI4fZi214boZp4W8ARd0pITk38KsPC+BJxZ5JhkYQrQcwTI+qKkvKlbGS/jCqKZ71ZdE9GoKOJbqQzErJLtt85yqEMzYhF+0qBaxGDtWCGpLigT+lshCpU5zZphOvU56vU5qrkg3kUj4LqVm1OIjvB8XMvx+++wa9+CQ5X+NyziIwpFGYsatMbdBba3DPv0pN3aIYalC+uo3j/Ff0VtqIGd1ST+8sWN6Usm5czJEQM2fMGldky5QtF6uEKV6dLYl9ibaZgtzZSuDguk3TKpD0S86dkliaGOSniTCI6JhM5raD5NFSRoepLI7mUkTJbaI+MTyF/TiEnWJ1S7JBLlwz2202ebrXo97Z53t3i8EabXnqd+IRkFx0pHGJOqpSDKiWB7pfoaUWOXz/g+O0u39/v8e3NY368e8iTZovYmCRG7f/CP1OlNN7oakd/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"\"\n        src=\"/static/41fc049c70ef42127266d3ebfcf21164/f058b/redux1.png\"\n        srcset=\"/static/41fc049c70ef42127266d3ebfcf21164/c26ae/redux1.png 158w,\n/static/41fc049c70ef42127266d3ebfcf21164/6bdcf/redux1.png 315w,\n/static/41fc049c70ef42127266d3ebfcf21164/f058b/redux1.png 630w,\n/static/41fc049c70ef42127266d3ebfcf21164/e80ac/redux1.png 809w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Redux는 애플리케이션에 있는 중앙 데이터(상태) 저장소와 같다.</p>\n<p>이 저장소에 전체 애플리케이션의 모든 상태를 저장한다.</p>\n<p>컴포넌트는 상태를 사용하기 위해 중앙 데이터 저장소에 구독을 걸어놓는다.</p>\n<p>데이터가 변경될 때마다 저장소가 컴포넌트에 알려주게 되고 컴포넌트는 필요한 데이터를 받는다.</p>\n<p>컴포넌트는 저장소에 있는 데이터를 직접 조작하지 않는다.</p>\n<p>그 대신 리듀서 함수를 사용하여 상태를 변경한다.</p>\n<p>컴포넌트는 액션을 디스패치하고 이 액션이 리듀서에 전달되어 작동한다.</p>\n<hr>\n<ul>\n<li>\n<p>강의 내용</p>\n<h1>Redux의 기본적 사용</h1>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 프로젝트에서 사용하는 것이 아닌 단일 js 파일에서 사용</span>\n<span class=\"token keyword\">const</span> redux <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"redux\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 리듀서 함수 작성</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">counterReducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">counter</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">\"increment\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">counter</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>counter <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">\"decrement\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">counter</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>counter <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 저장소 생성</span>\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> redux<span class=\"token punctuation\">.</span><span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>counterReducer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// subscriber 함수: 상태가 바뀐 이후에 작동되는 함수</span>\n<span class=\"token comment\">// 항상 최신 상태를 가져온다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">counterSubscriber</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> latestState <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>latestState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 구독 걸기</span>\nstore<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>counterSubscriber<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// dispatch로 액션 전달 -> 리듀서 작동 -> 상태 변경</span>\nstore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"increment\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nstore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"decrement\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h1>React에서 redux 사용하기</h1>\n<ol>\n<li>\n<p><code class=\"language-text\">npm i redux react-redux</code></p>\n<ol>\n<li>react-redux는 리액트에서 리덕스 스토어 구독을 더 쉽게 도와준다.</li>\n</ol>\n</li>\n<li>\n<p>store, reducer 함수 생성</p>\n</li>\n<li>\n<p>App 컴포넌트를 렌더링하는 index.js 에서 Provider로 감싸기</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>Provider<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">...</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>Provider store<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>store<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Provider<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>store를 사용할 컴포넌트에서 <code class=\"language-text\">useSelector</code> 훅을 이용하여 state를 가져올 수 있고 <code class=\"language-text\">useDispatch</code> 함수를 이용하여 dispatch할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useSelector<span class=\"token punctuation\">,</span> useDispatch <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">...</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Counter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// 상태 중 일부를 가져올 수 있음</span>\n  <span class=\"token keyword\">const</span> counter <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>counter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> dispatch <span class=\"token operator\">=</span> <span class=\"token function\">useDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">incrementHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'increment'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">decrementHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'decrement'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Counter<span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ol>\n</li>\n</ul>\n<hr>\n<h1>공식문서를 보며 Redux 배우기</h1>\n<h2>Redux Terminology</h2>\n<h3>actions</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> addTodoAction <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"todos/todoAdded\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Buy milk\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>쉽게 말해 애플리케이션 안에서 일어나는 이벤트를 설명한 것</p>\n<p><code class=\"language-text\">type</code>을 통해 todo가 추가될 것을 알 수 있고 <code class=\"language-text\">payload</code>에서 어떤 todo가 추가될 지 알 수 있다.</p>\n<h3>action creators</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTodo</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">text</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"todos/todoAdded\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> text<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>action 객체를 생성하는 함수</p>\n<h3>reducers</h3>\n<p><code class=\"language-text\">state</code>와 <code class=\"language-text\">action</code>객체를 받아서 state를 업데이트하고 반환하는 함수</p>\n<p>action에 따라 이벤트를 다루는 이벤트 리스너라고 생각하면 된다.</p>\n<p><strong>reducer rule</strong></p>\n<ul>\n<li>state와 action을 기반으로 새로운 state에 대한 연산을 해야함.</li>\n<li>기존의 state를 변경하는 것이 아니라, state를 복사하여 변경하는 <strong>immutable update</strong>를 해야함.</li>\n<li>비동기적인 로직, 랜덤 값 생성, side effect가 금지된다.</li>\n</ul>\n<p>Redux의 목표는 예측가능한 코드를 만드는 것이다. 외부 변수에 의존하거나 랜덤하게 작동하는 경우 우리는 결과를 예측할 수 없고 애플리케이션 또한 랜덤으로 작동하게 될 것이다. 이것은 버그로 이어질 수 있다. 그러므로 immutable update가 중요하다.</p>\n<p><strong>reducer logic</strong></p>\n<ul>\n<li>어떤 action인지 확인하고 그에 따른 로직을 실행한다.\n<ul>\n<li>immutable update 후 반환</li>\n</ul>\n</li>\n<li>해당 action이 없다면 기존 state를 반환한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">counterReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> initialState<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Check to see if the reducer cares about this action</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">\"counter/increment\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// If so, make a copy of `state`</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// and update the copy with the new value</span>\n      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>value <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// otherwise return the existing state unchanged</span>\n  <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>if/else문을 사용하거나 switch문을 사용하여 구현할 수 있다.</p>\n<h3>store</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> configureStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@reduxjs/toolkit\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">configureStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">reducer</span><span class=\"token operator\">:</span> counterReducer <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// {value: 0}</span></code></pre></div>\n<p>store는 생성할 때 reducer를 전달한다.</p>\n<p>getState 메서드를 통해 state 값을 받을 수 있다.</p>\n<h3>dispatch</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"counter/increment\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// {value: 1}</span></code></pre></div>\n<p>state를 업데이트 하기 위해 dispatch 메서드를 사용한다.</p>\n<p>dispatch 메서드를 사용하는 것은 “이벤트를 일으키는 것”과 같다.</p>\n<h3>selectors</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">selectCounterValue</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> currentValue <span class=\"token operator\">=</span> <span class=\"token function\">selectCounterValue</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>currentValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 2</span></code></pre></div>\n<p>state에서 특정 값만 추출하는 함수</p>\n<p>애플리케이션이 커지는 경우 반복되는 로직을 피하는 등 유용하게 쓰일 수 있다.</p>\n<h2>Redux Store 생성하기</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> configureStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@reduxjs/toolkit\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> counterReducer <span class=\"token keyword\">from</span> <span class=\"token string\">\"../features/counter/counterSlice\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">configureStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">reducer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">counter</span><span class=\"token operator\">:</span> counterReducer<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">configureStore</code>에서는 reducer를 넘겨주어야 한다.</p>\n<p><code class=\"language-text\">{counter: counterReducer}</code>를 reducer 객체에 넘겨준다는 것은 우리가 state.counter 섹션을 가지고 싶다는 뜻이며, action이 디스패치 되었을 때 state.counter 섹션을 업데이트할지 여부와 방법을 결정하는 일을 counterReducer가 담당한다는 뜻이다.</p>\n<h3>redux slices</h3>\n<p>slice는 하나의 기능에 대한 reducer 로직과 action을 하나의 파일로 묶은 것을 의미한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> configureStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@reduxjs/toolkit\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> usersReducer <span class=\"token keyword\">from</span> <span class=\"token string\">\"../features/users/usersSlice\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> postsReducer <span class=\"token keyword\">from</span> <span class=\"token string\">\"../features/posts/postsSlice\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> commentsReducer <span class=\"token keyword\">from</span> <span class=\"token string\">\"../features/comments/commentsSlice\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">configureStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">reducer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">users</span><span class=\"token operator\">:</span> usersReducer<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">posts</span><span class=\"token operator\">:</span> postsReducer<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">comments</span><span class=\"token operator\">:</span> commentsReducer<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>state.users, state.posts, state.comments가 각각의 slice로 되어있는 것을 볼 수 있다.</p>\n<h2>Slice reducer와 action 생성하기</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// features/counter/counterSlice.js</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createSlice <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@reduxjs/toolkit\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> counterSlice <span class=\"token operator\">=</span> <span class=\"token function\">createSlice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"counter\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">initialState</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">reducers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">increment</span><span class=\"token operator\">:</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Redux Toolkit allows us to write \"mutating\" logic in reducers. It</span>\n      <span class=\"token comment\">// doesn't actually mutate the state because it uses the immer library,</span>\n      <span class=\"token comment\">// which detects changes to a \"draft state\" and produces a brand new</span>\n      <span class=\"token comment\">// immutable state based off those changes</span>\n      state<span class=\"token punctuation\">.</span>value <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">decrement</span><span class=\"token operator\">:</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>value <span class=\"token operator\">-=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">incrementByAmount</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>value <span class=\"token operator\">+=</span> action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> increment<span class=\"token punctuation\">,</span> decrement<span class=\"token punctuation\">,</span> incrementByAmount <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> counterSlice<span class=\"token punctuation\">.</span>actions<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> counterSlice<span class=\"token punctuation\">.</span>reducer<span class=\"token punctuation\">;</span></code></pre></div>\n<p>redux toolkit에는 action type string, action creator function, action 객체를 생성하는 작업을 처리하는 <code class=\"language-text\">createSlice</code> 함수가 있다.</p>\n<p>슬라이스의 이름을 정의하고 reducer 함수가 포함된 객체를 작성하기만 하면 해당 액션 코드가 자동으로 생성된다.</p>\n<p>“counter” + “increment”가 되어 <code class=\"language-text\">{type: \"counter/increment\"}</code>가 생성된다.</p>\n<p>따라서 이전의 방식처럼 우리가 직접 action type을 지정하고 action 생성 함수를 작성할 필요가 없다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>counterSlice<span class=\"token punctuation\">.</span>actions<span class=\"token punctuation\">.</span><span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// {type: \"counter/increment\"}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> newState <span class=\"token operator\">=</span> counterSlice<span class=\"token punctuation\">.</span><span class=\"token function\">reducer</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  counterSlice<span class=\"token punctuation\">.</span>actions<span class=\"token punctuation\">.</span><span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>newState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// {value: 11}</span></code></pre></div>\n<h2>Reducer와 immutable update</h2>\n<p><code class=\"language-text\">createSlice</code>함수는 immer 라이브러리를 사용하기 때문에 우리가 immutable update를 하기 쉽게 만들어준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">handwrittenReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">first</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>state<span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">second</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>state<span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">.</span>second<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span>action<span class=\"token punctuation\">.</span>someId<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token operator\">...</span>state<span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">.</span>second<span class=\"token punctuation\">[</span>action<span class=\"token punctuation\">.</span>someId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">fourth</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>someValue<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위의 복잡한 코드를 아래와 같이 쉽게 작성할 수 있도록 도와준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">reducerWithImmer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  state<span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">.</span>second<span class=\"token punctuation\">[</span>action<span class=\"token punctuation\">.</span>someId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>fourth <span class=\"token operator\">=</span> action<span class=\"token punctuation\">.</span>someValue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>주의할 점은 <code class=\"language-text\">createSlice</code>와 <code class=\"language-text\">createReducer</code>안에서만 mutating 로직을 사용할 수 있다는 점이다.</p>\n<h2>Thunk로 비동기 로직 작성하기</h2>\n<p>Thunk는 비동기 로직을 작성할 수 있는 redux 함수이다.</p>\n<ul>\n<li>dispatch와 getState를 인자로 받는다.</li>\n<li>thunk 함수를 생성하고 리턴하는 외부 생성 함수가 존재한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// The function below is called a thunk and allows us to perform async logic.</span>\n<span class=\"token comment\">// It can be dispatched like a regular action: `dispatch(incrementAsync(10))`.</span>\n<span class=\"token comment\">// This will call the thunk with the `dispatch` function as the first argument.</span>\n<span class=\"token comment\">// Async code can then be executed and other actions can be dispatched</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">incrementAsync</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">amount</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">dispatch</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">incrementByAmount</span><span class=\"token punctuation\">(</span>amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위 코드는 <code class=\"language-text\">store.dispatch(incrementAsync(5))</code>를 통해 실행할 수 있다.</p>\n<p>서버로부터 AJAX 호출을 해야한다면 아래와 같이 코드를 작성할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// the outside \"thunk creator\" function</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchUserById</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">userId</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// the inside \"thunk function\"</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch<span class=\"token punctuation\">,</span> getState</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// make an async call in the thunk</span>\n      <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userAPI<span class=\"token punctuation\">.</span><span class=\"token function\">fetchById</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// dispatch an action when we get the response back</span>\n      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">userLoaded</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// If something went wrong, handle it here</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>useSelector와 useDispatch</h2>\n<h3>useSelector</h3>\n<p>redux store state로부터 필요한 데이터 조각을 추출하는 훅</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// features/counter/counterSlice.js</span>\n\n<span class=\"token comment\">// The function below is called a selector and allows us to select a value from</span>\n<span class=\"token comment\">// the state. Selectors can also be defined inline where they're used instead of</span>\n<span class=\"token comment\">// in the slice file. For example: `useSelector((state) => state.counter.value)`</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">selectCount</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>counter<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span>selectCount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 코드는 useSelector를 통해 state.counter.value를 count에 저장한다.</p>\n<h3>useDispatch</h3>\n<p>redux store로부터 dispatch 메서드를 사용할 수 있도록 하는 훅</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> dispatch <span class=\"token operator\">=</span> <span class=\"token function\">useDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>button\n  className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">}</span>\n  aria<span class=\"token operator\">-</span>label<span class=\"token operator\">=</span><span class=\"token string\">\"Increment value\"</span>\n  onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">></span>\n  <span class=\"token operator\">+</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">store.dispatch(increment())</code>와 같은 효과를 낸다.</p>\n<h2>Providing the store</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"./index.css\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">\"./App\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> store <span class=\"token keyword\">from</span> <span class=\"token string\">\"./app/store\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Provider <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-redux\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> serviceWorker <span class=\"token keyword\">from</span> <span class=\"token string\">\"./serviceWorker\"</span><span class=\"token punctuation\">;</span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>Provider store<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>store<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Provider<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>useSelector 훅을 사용하기 위해서는 Provider 컴포넌트로 감싸주어야 한다.</p>\n<h2>Preparing Action Payloads</h2>\n<p>createSlice는 “prepare callback” 함수를 제공한다.</p>\n<p>이 함수는 여러 개의 매개변수를 취할 수 있고, 랜덤 unique id를 만들거나 필요한 로직을 수행하고 액션 객체 값을 설정할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onSavePostClicked</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>title <span class=\"token operator\">&amp;&amp;</span> content<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span>\n      <span class=\"token function\">postAdded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token function\">nanoid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        title<span class=\"token punctuation\">,</span>\n        content<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setContent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>예를 들어, post를 추가하는 함수에서 dispatch함수 속 payload에 <code class=\"language-text\">id: nanoid();</code>를 추가하여 넣었다면</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> postsSlice <span class=\"token operator\">=</span> <span class=\"token function\">createSlice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"posts\"</span><span class=\"token punctuation\">,</span>\n  initialState<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">reducers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">postAdded</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">reducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        state<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">title<span class=\"token punctuation\">,</span> content</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token function\">nanoid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            title<span class=\"token punctuation\">,</span>\n            content<span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">postUpdated</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">,</span> content <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> existingPost <span class=\"token operator\">=</span> state<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span> <span class=\"token operator\">=></span> post<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>existingPost<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        existingPost<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> title<span class=\"token punctuation\">;</span>\n        existingPost<span class=\"token punctuation\">.</span>content <span class=\"token operator\">=</span> content<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>슬라이스의 postAdded 안에 reducer함수와 prepare 함수를 따로 두어 prepare 함수가 반환하는 액션 객체를 바탕으로 reducer 함수를 실행할 수 있다.</p>\n<p>이렇게 하면</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onSavePostClicked</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>title <span class=\"token operator\">&amp;&amp;</span> content<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">postAdded</span><span class=\"token punctuation\">(</span>title<span class=\"token punctuation\">,</span> content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setContent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>onSavePostClicked 로직을 위의 코드처럼 바꿀 수 있다.</p>\n<h2>Data fetching</h2>\n<h3>미들웨어의 사용</h3>\n<p>비동기 로직을 이용하여 스토어와 상호작용 하도록 하기 위해서는 미들웨어를 사용해야 한다.</p>\n<p>미들웨어는</p>\n<ul>\n<li>액션이 디스패치 되었을 때 필요한 추가적인 로직을 수행한다.</li>\n<li>디스패치된 액션을 일시 중지, 수정, 지연, 대체, 중지할 수 있다.</li>\n<li>dispatch 및 getState에 액세스할 수 있는 추가 코드를 작성한다.</li>\n<li>함수 및 프로미스와 같은 일반 액션 객체 이외의 다른 값을 가로채고 대신 실제 액션 객체를 디스패치 하는 방법을 dispatch에게 알려준다. (?)</li>\n</ul>\n<p>미들웨어를 사용하는 이유는 스토어와 상호작용하는 다양한 비동기 로직을 사용할 수 있기 때문이다.</p>\n<p>대표적인 미들웨어로 <code class=\"language-text\">redux-thunk</code>가 있다. <code class=\"language-text\">configureStore</code>함수는 자동적으로 thunk를 미들웨어로 사용한다.</p>\n<p><img src=\"https://ko.redux.js.org/assets/images/ReduxAsyncDataFlowDiagram-d97ff38a0f4da0f327163170ccc13e80.gif\" alt=\"https://ko.redux.js.org/assets/images/ReduxAsyncDataFlowDiagram-d97ff38a0f4da0f327163170ccc13e80.gif\"></p>\n<h3>Thunk functions</h3>\n<p>Thunk 미들웨어가 스토어에 추가되면 store.dispatch에 직접 thunk 함수를 전달할 수 있다.</p>\n<p>Thunk 함수는 항상 (<code class=\"language-text\">dispatch</code>, <code class=\"language-text\">getState</code>)를 사용하여 호출되며 필요에 따라 thunk 내부에서 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">configureStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">reducer</span><span class=\"token operator\">:</span> counterReducer <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">exampleThunkFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch<span class=\"token punctuation\">,</span> getState</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> stateBefore <span class=\"token operator\">=</span> <span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Counter before: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>stateBefore<span class=\"token punctuation\">.</span>counter<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> stateAfter <span class=\"token operator\">=</span> <span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Counter after: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>stateAfter<span class=\"token punctuation\">.</span>counter<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nstore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span>exampleThunkFunction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>일반 액션 객체를 디스패치하는 것과 일관성을 유지하기 위해 이러한 형태로 thunk action creator를 작성한다.</p>\n<p>이 action creator는 thunk 내부에서 사용할 수 있는 인수들을 받는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">logAndAdd</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">amount</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch<span class=\"token punctuation\">,</span> getState</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> stateBefore <span class=\"token operator\">=</span> <span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Counter before: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>stateBefore<span class=\"token punctuation\">.</span>counter<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">incrementByAmount</span><span class=\"token punctuation\">(</span>amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> stateAfter <span class=\"token operator\">=</span> <span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Counter after: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>stateAfter<span class=\"token punctuation\">.</span>counter<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nstore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">logAndAdd</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Data fetching을 위한 로직</h3>\n<ul>\n<li>request를 하기 전에 “start” action이 디스패치 된다. loading state를 다루기 위해 사용된다.</li>\n<li>비동기 요청이 수행된다.</li>\n<li>요청 결과에 따라 “success” action과 “failure” action이 디스패치 된다.\n<ul>\n<li>loading state가 초기화 된다.(false)</li>\n<li>“success”: 요청 결과 데이터를 다루는 액션</li>\n<li>“failure”: 오류를 다루는 액션</li>\n</ul>\n</li>\n</ul>\n<p>이러한 과정이 꼭 필요한 것은 아니지만 일반적으로 사용된다.</p>\n<h3>createAsyncThunk</h3>\n<p>start/success/failure 액션을 자동으로 디스패치 해주는 thunk API</p>\n<p>createAsyncThunk는 두 개의 인수를 받는다.</p>\n<ul>\n<li>액션 타입에 사용될 prefix string</li>\n<li>payload creator 콜백 함수\n<ul>\n<li>데이터를 포함하는 Promise</li>\n<li>에러와 함께 reject되는 Promise</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createSlice<span class=\"token punctuation\">,</span> nanoid<span class=\"token punctuation\">,</span> createAsyncThunk <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@reduxjs/toolkit\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> client <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../../api/client\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">posts</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> <span class=\"token string\">\"idle\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> fetchPosts <span class=\"token operator\">=</span> <span class=\"token function\">createAsyncThunk</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"posts/fetchPosts\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/fakeApi/posts\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>fetchPosts를 디스패치하면 아래처럼 동작한다.</p>\n<p><img src=\"https://ko.redux.js.org/assets/images/devtools-posts-pending-8885d18adbd31d8269b31caffe463c93.png\" alt=\"https://ko.redux.js.org/assets/images/devtools-posts-pending-8885d18adbd31d8269b31caffe463c93.png\"></p>\n<p><code class=\"language-text\">posts/fetchPosts/pending</code>을 loading 상태로 사용할 수 있다.</p>\n<p>Promise가 resolve되면 콜백으로부터 <code class=\"language-text\">response.data</code> 배열을 받고 <code class=\"language-text\">posts/fetchPosts/fulfilled</code>액션을 디스패치한다.</p>\n<h3>extraReducers 옵션</h3>\n<p>슬라이스의 reducers 필드에 정의하지 않은 액션에 대하여 처리해야할 때 extraReducers 옵션을 이용해 이를 가능하게 할 수 있다.</p>\n<p>extraReducers 옵션은 builder라는 파라미터를 받는 함수여야한다.</p>\n<p>builder 객체는 추가적인 액션에 대한 reducer를 정의하는 메서드를 제공한다.</p>\n<p><code class=\"language-text\">builder.addCase(actionCreator, reducer)</code>를 통해 액션을 다룰 수 있다.</p>\n<p>예시</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> increment <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../features/counter/counterSlice\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> postsSlice <span class=\"token operator\">=</span> <span class=\"token function\">createSlice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"posts\"</span><span class=\"token punctuation\">,</span>\n  initialState<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">reducers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// slice-specific reducers here</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">extraReducers</span><span class=\"token operator\">:</span> <span class=\"token parameter\">builder</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    builder\n      <span class=\"token punctuation\">.</span><span class=\"token function\">addCase</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"counter/decrement\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">addCase</span><span class=\"token punctuation\">(</span>increment<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","frontmatter":{"title":"Redux","date":"March 02, 2023","description":" ","tags":["React","Redux"]}},"previous":{"fields":{"slug":"/2023/useState-vs-useRef/"},"frontmatter":{"title":"useState vs useRef"}},"next":{"fields":{"slug":"/2023/React-Router/"},"frontmatter":{"title":"React Router"}}},"pageContext":{"id":"d5fd7095-ff84-5b46-8a40-152fb1101d9c","previousPostId":"2e3e2c76-44bb-5392-8ae4-cce53c613d70","nextPostId":"5968fdb2-3b0c-5c3c-aa7b-aef732f288e7"}},"staticQueryHashes":["230163734","2841359383"],"slicesMap":{}}