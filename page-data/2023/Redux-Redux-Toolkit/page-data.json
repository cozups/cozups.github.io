{"componentChunkName":"component---src-templates-blog-post-js","path":"/2023/Redux-Redux-Toolkit/","result":{"data":{"site":{"siteMetadata":{"title":"cozups-log"}},"markdownRemark":{"id":"1aef92c4-3701-5de9-a137-75ad7faf2d51","excerpt":"1. Redux Toolkit이 등장한 이유 Redux를 사용하기 위해서는 복잡한 셋업과정이 필요했다. action type action creator reducer의 switch…","html":"<h1>1. Redux Toolkit이 등장한 이유</h1>\n<p>Redux를 사용하기 위해서는 복잡한 셋업과정이 필요했다.</p>\n<ul>\n<li>action type</li>\n<li>action creator</li>\n<li>reducer의 switch문</li>\n</ul>\n<p>위의 세 가지를 계속해서 작성해야 했다.</p>\n<p>특정 작업을 처리하기 위해서는 다른 라이브러리들이 설치되어야 했다.</p>\n<ul>\n<li>redux-thunk\n<ul>\n<li>비동기 액션 처리</li>\n</ul>\n</li>\n<li>Immer\n<ul>\n<li>state가 중첩일 경우 쓰기 편리함.</li>\n</ul>\n</li>\n<li>redux devtools\n<ul>\n<li>디버그</li>\n</ul>\n</li>\n</ul>\n<p>Redux Toolkit은 이러한 <strong>복잡한 셋업과정을 단순화 하고 유용한 기능들을 내장</strong>하고 있어 좋은 개발자 경험을 제공할 수 있다.</p>\n<hr>\n<h1>2. Slice</h1>\n<p>Redux Toolkit에서는 state를 기능적 단위로 잘라 slice로 관리한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">numOfCakes</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> cakeSlice <span class=\"token operator\">=</span> <span class=\"token function\">createSlice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cake\"</span><span class=\"token punctuation\">,</span>\n  initialState<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">reducers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">ordered</span><span class=\"token operator\">:</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>numOfCakes<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">restocked</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>numOfCakes <span class=\"token operator\">+=</span> action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">numOfIceCreams</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> iceCreamSlice <span class=\"token operator\">=</span> <span class=\"token function\">createSlice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"iceCream\"</span><span class=\"token punctuation\">,</span>\n  initialState<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">reducers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">ordered</span><span class=\"token operator\">:</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>numOfIceCreams<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">restocked</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>numOfIceCreams <span class=\"token operator\">+=</span> action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>1. reducer 내에서 직접 상태를 변경해도 된다.</h2>\n<p>Redux를 사용할 땐 reducer 함수 내에서 직접 상태를 변경하면 안 됐다.</p>\n<p>기존의 상태를 복사하여 필요한 부분만 변경 후 리턴하는 형태로 상태를 변경해야 했다.</p>\n<p>그러나 Redux Toolkit에서는 <strong>createSlice 함수 내에서 Immer 라이브러리를 사용하므로 상태를 직접 변경하는 것이 가능</strong>하다.</p>\n<h2>2. Action Creator 함수를 만들지 않아도 된다.</h2>\n<p>createSlice 함수가 <strong>액션 생성자 함수와 리듀서 함수를 자동으로 생성</strong>하기 때문에 액션 생성자 함수를 만들지 않아도 된다.</p>\n<p>createSlice 함수는 액션 생성자 함수와 reducer 함수를 하나의 객체로 묶어서 반환하고 이를 통해 액션을 디스패치하고 상태를 업데이트할 수 있다.</p>\n<p>reducer 함수 내에 정의한 함수 이름과 같은 이름의 액션 생성자 함수를 자동으로 생성한다.</p>\n<p>액션의 타입은 <code class=\"language-text\">\"슬라이스이름/액션생성자함수이름\"</code>의 형태로 생성된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/29e446a4692743a4b34a6ad872e09ef3/3fe45/rtk1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 11.39240506329114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAhklEQVR42h2NSw6CMAAFOYYLY6LYCJWWUn5SEihCICF6/+OMldUs3mReJPIG278xbkK/BupxPVj5hX7bqaeZ1OTcZMHffZQ9F1kGOoSuiVUVNkMsJadrSnQWisavyCDEmT2CIi8xU4f7LNi5C5ulGTdav6H8TjqEo+VLUrQk1nFXGpE9j+APGz4/7dC7wQMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"\"\n        src=\"/static/29e446a4692743a4b34a6ad872e09ef3/f058b/rtk1.png\"\n        srcset=\"/static/29e446a4692743a4b34a6ad872e09ef3/c26ae/rtk1.png 158w,\n/static/29e446a4692743a4b34a6ad872e09ef3/6bdcf/rtk1.png 315w,\n/static/29e446a4692743a4b34a6ad872e09ef3/f058b/rtk1.png 630w,\n/static/29e446a4692743a4b34a6ad872e09ef3/3fe45/rtk1.png 699w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/25183d8fd76479494eb9b8b3388c52ee/aec65/rtk2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.025316455696203%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAjElEQVR42g2NSw6CMABEuYcJUQSR8tFSCgICtmJUgokr73+TZxezeHkzGS9RHbK9ITtL0YzU5kWme7SZGZYVNRmaqSVIzyRl59LiC0msR45uG51qto4jkbAJU7ydAz0+EE4GWcnFvglzibpf6T8z0nZoWxCXiuH5pXU+agzV8nOd1Z0P7POKOBP4h5w/Ti5ArzjA42wAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"\"\n        src=\"/static/25183d8fd76479494eb9b8b3388c52ee/f058b/rtk2.png\"\n        srcset=\"/static/25183d8fd76479494eb9b8b3388c52ee/c26ae/rtk2.png 158w,\n/static/25183d8fd76479494eb9b8b3388c52ee/6bdcf/rtk2.png 315w,\n/static/25183d8fd76479494eb9b8b3388c52ee/f058b/rtk2.png 630w,\n/static/25183d8fd76479494eb9b8b3388c52ee/aec65/rtk2.png 687w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<hr>\n<h1>3. createStore vs configureStore</h1>\n<p>configureStore 함수는 <strong>createStore 함수의 기능을 충분히 대체</strong>할 수 있을 뿐만 아니라 <strong>더 많은 기능을 제공</strong>하므로 configureStore 함수를 사용할 것을 공식적으로 권장하고 있다.</p>\n<p>configureStore 함수는 <strong>기본적으로 redux devtools extension을 지원</strong>하므로 개발자가 더 쉽게 디버깅을 할 수 있도록 도와준다.</p>\n<p>뿐만 아니라, 여러 개의 리듀서를 사용하기 위해서는 <code class=\"language-text\">combineReducer</code>함수를 사용해야 했다. 그러나 configureStore 함수를 사용하면 <strong>별도의 함수 없이 여러 개의 리듀서를 사용</strong>할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">configureStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">reducer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">cake</span><span class=\"token operator\">:</span> cakeReducer<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">iceCream</span><span class=\"token operator\">:</span> iceCreamReducer<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h1>4. 미들웨어 적용 방법</h1>\n<p>기존의 방식으로는 <code class=\"language-text\">applyMiddleware</code> 함수를 사용하여 미들웨어를 사용할 수 있었다.</p>\n<p>Redux Toolkit 에서는 configureStore 함수 내에 middleware 프로퍼티에 사용할 미들웨어를 추가하여 미들웨어를 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">configureStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">reducer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">cake</span><span class=\"token operator\">:</span> cakeReducer<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">iceCream</span><span class=\"token operator\">:</span> iceCreamReducer<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">middleware</span><span class=\"token operator\">:</span> <span class=\"token parameter\">getDefaultMiddleware</span> <span class=\"token operator\">=></span> <span class=\"token function\">getDefaultMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>logger<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>기본적으로 사용하는 미들웨어들이 있기 때문에 기존의 미들웨어 뒤에 concat 함수로 logger 미들웨어를 부착하여 사용한다.</p>\n<hr>\n<h1>5. 추가적인 리듀서 사용하기</h1>\n<p>Redux Toolkit의 슬라이스는 그 슬라이스에서 만들어 낸 액션에 대한 작업만 이루어진다.</p>\n<p>다른 슬라이스가 만들어 낸 액션에 대해서는 반응하지 않는다.</p>\n<p>만약 다른 슬라이스의 액션에 대하여 반응하고 싶으면 어떻게 해야할까?</p>\n<p>Redux에서는 reducer 함수의 switch문에 케이스를 단순히 추가하면 됐다. 그러나 Redux Toolkit에서는 액션과 리듀서를 자동으로 생성하므로 개발자가 직접 케이스를 추가하는 방법을 사용하기 위해서는 다른 방법을 사용해야 한다. 이 때 사용하는 것이 <code class=\"language-text\">extraReducers</code>이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> iceCreamSlice <span class=\"token operator\">=</span> <span class=\"token function\">createSlice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"iceCream\"</span><span class=\"token punctuation\">,</span>\n  initialState<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">reducers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">ordered</span><span class=\"token operator\">:</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>numOfIceCreams<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">restocked</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>numOfIceCreams <span class=\"token operator\">+=</span> action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">extraReducers</span><span class=\"token operator\">:</span> <span class=\"token parameter\">builder</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// cakeSlice의 액션 중 ordered 액션에 대하여</span>\n    builder<span class=\"token punctuation\">.</span><span class=\"token function\">addCase</span><span class=\"token punctuation\">(</span>cakeActions<span class=\"token punctuation\">.</span>ordered<span class=\"token punctuation\">,</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>numOfIceCreams<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>예를 들어 케이크를 주문하는 손님에게 아이스크림을 무료로 제공하고 싶다면 extraReducers에 cake슬라이스의 액션을 추가하고 그 액션에 대하여 처리할 함수를 추가하면 케이크 주문이 들어왔을 때에도 아이스크림 개수를 줄일 수 있다.</p>\n<p>builder는 Redux Toolkit에서 사용되는 개념으로, extraReducers 프로퍼티 내에서 리듀서를 정의할 때 사용된다. builder는 addCase, addMatcher 등의 메서드를 통해 리듀서를 정의하고 각 액션에 대한 state transition을 처리할 수 있도록 한다.</p>\n<hr>\n<h1>6. Async actions</h1>\n<p>Redux에서 비동기 작업을 하기 위해서는 redux-thunk 라이브러리를 별도로 설치해야 했다. 그러나 Redux Toolkit에서는 <code class=\"language-text\">createAsyncThunk</code>라는 함수를 기본으로 제공하여 비동기 작업을 처리할 수 있도록 해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// generates pending, fulfilled and rejected action types</span>\n<span class=\"token keyword\">const</span> fetchUsers <span class=\"token operator\">=</span> <span class=\"token function\">createAsyncThunk</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user/fetchUsers\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> axios\n    <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://jsonplaceholder.typicode.com/users\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> userSlice <span class=\"token operator\">=</span> <span class=\"token function\">createSlice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span>\n  initialState<span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">extraReducers</span><span class=\"token operator\">:</span> <span class=\"token parameter\">builder</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    builder<span class=\"token punctuation\">.</span><span class=\"token function\">addCase</span><span class=\"token punctuation\">(</span>fetchUsers<span class=\"token punctuation\">.</span>pending<span class=\"token punctuation\">,</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>loading <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    builder<span class=\"token punctuation\">.</span><span class=\"token function\">addCase</span><span class=\"token punctuation\">(</span>fetchUsers<span class=\"token punctuation\">.</span>fulfilled<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>loading <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n      state<span class=\"token punctuation\">.</span>users <span class=\"token operator\">=</span> action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">;</span>\n      state<span class=\"token punctuation\">.</span>error <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    builder<span class=\"token punctuation\">.</span><span class=\"token function\">addCase</span><span class=\"token punctuation\">(</span>fetchUsers<span class=\"token punctuation\">.</span>rejected<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>loading <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n      state<span class=\"token punctuation\">.</span>users <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      state<span class=\"token punctuation\">.</span>error <span class=\"token operator\">=</span> action<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>createAsyncThunk의 핵심적 특징은 두 번째 인자인 <strong>payloadCreator에서 반환된 것이 프로미스이면 자동으로 pending, fulfilled, rejected 상태에 따른 액션을 자동으로 생성한다</strong>는 것이다.</p>\n<p>createAsyncThunk의 첫 번째 인자는 typePrefix로 typePrefix 뒤에 pending, fulfilled, rejected가 붙은 것이 자동으로 생성되는 액션의 이름이다. 위 코드의 경우 typePrefix가 ‘user/fetchedUsers’이므로 생성되는 액션은 <code class=\"language-text\">‘user/fetchedUsers/pending’</code>, <code class=\"language-text\">‘user/fetchedUsers/fulfilled’</code>, <code class=\"language-text\">‘user/fetchedUsers/rejected’</code>이다.</p>\n<ul>\n<li>fetchUsers.pending ⇒ <code class=\"language-text\">‘user/fetchedUsers/pending’</code></li>\n<li>fetchUsers.fulfilled ⇒ <code class=\"language-text\">‘user/fetchedUsers/fulfilled’</code></li>\n<li>fetchUsers.rejected ⇒ <code class=\"language-text\">‘user/fetchedUsers/rejected’</code></li>\n</ul>\n<p>그러나 이에 따른 리듀서 함수는 자동으로 만들어주지 않으므로 직접 extraReducers에 케이스를 추가하여 리듀서 함수를 생성해야 한다.</p>","frontmatter":{"title":"Redux와 Redux Toolkit의 비교","date":"December 05, 2023","description":"Redux와 Redux Toolkit의 사용법을 배우면서 정리하는 비교글","tags":["React","Redux"]}},"previous":{"fields":{"slug":"/2023/react-key-uuid/"},"frontmatter":{"title":"[React] key에 uuid를 사용하는 것은 좋은 선택이 아니다."}},"next":{"fields":{"slug":"/2023/RQ-caching-refetching/"},"frontmatter":{"title":"[React Query] useQuery / 캐싱 / refetching"}}},"pageContext":{"id":"1aef92c4-3701-5de9-a137-75ad7faf2d51","previousPostId":"046b98d1-c784-572a-bbc1-4777464fdb06","nextPostId":"fbe27f0f-bbf0-5490-9ff7-4745c750f7ed"}},"staticQueryHashes":["230163734","2841359383"],"slicesMap":{}}