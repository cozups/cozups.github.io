{"componentChunkName":"component---src-templates-blog-post-js","path":"/2023/wanted-how-react-use-virtual-dom/","result":{"data":{"site":{"siteMetadata":{"title":"cozups-log"}},"markdownRemark":{"id":"7218b739-8933-5fad-99ab-260348bd3342","excerpt":"Vite 빠르고 간결한 모던 웹 프로젝트 개발 경험에 초점을 맞춰 탄생한 빌드 도구 장점 번들링 성능을 높임 → 서버 구동이 빠르다 문제점을 dependencies와 source code 두 가지로 나누어 개선 dependencies: 자주 바뀌지 않는 소스 코드 → Go…","html":"<h1>Vite</h1>\n<blockquote>\n<p>빠르고 간결한 모던 웹 프로젝트 개발 경험에 초점을 맞춰 탄생한 빌드 도구</p>\n</blockquote>\n<h2>장점</h2>\n<ul>\n<li>번들링 성능을 높임 → 서버 구동이 빠르다\n<ul>\n<li>문제점을 dependencies와 source code 두 가지로 나누어 개선</li>\n<li>dependencies: 자주 바뀌지 않는 소스 코드 → Go로 작성된 ESBuild를 통해 다른 번들러 대비 10-100배 빠른 번들링</li>\n<li>source code: 자주 바뀌는 소스 코드 → 현재 화면에서 실제로 사용이 되어야만 처리되도록 함.</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1>createRoot()</h1>\n<p>리액트 컴포넌트를 표시하는 루트를 생성하는 함수</p>\n<p>VirtualDOM Tree에서 <code class=\"language-text\">&lt;div id=”root” /></code>를 나타내는 node를 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> <span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>domNode<span class=\"token punctuation\">,</span> options<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>domNode\n<ul>\n<li>DOM 엘리먼트</li>\n<li>이 엘리먼트를 root로 삼는다.</li>\n</ul>\n</li>\n<li>option\n<ul>\n<li><code class=\"language-text\">onRecoverableError</code>: React가 자동으로 오류를 복구할 때 호출되는 콜백</li>\n<li><code class=\"language-text\">identifierPrefix</code>: useId에 의해 생성된 ID에 사용하는 문자열 접두사. 같은 페이지에서 여러 루트를 사용할 때 충돌을 피하는 데 유용함.</li>\n</ul>\n</li>\n</ul>\n<p>사용 예시</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createRoot <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/client\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> <span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h1>Virtual DOM의 역할</h1>\n<ul>\n<li>최적화된 업데이트로 사용자 경험 개선\n<ul>\n<li><code class=\"language-text\">reconciliation</code>: virtual DOM과 실제 DOM을 비교하여 동기화하는 과정</li>\n<li>한 마디로, 두 트리의 다른 부분을 찾아서 어떤 부분을 변경해야 하는 지 결정하는 과정</li>\n</ul>\n</li>\n<li>업데이트에 우선순위를 부여\n<ul>\n<li>animation vs text</li>\n</ul>\n</li>\n</ul>\n<h2>React의 diffing process</h2>\n<ol>\n<li>두 virtual DOM 트리가 같은 루트를 가졌는지 확인</li>\n<li>DFS 알고리즘을 통해 변경된 엘리먼트를 찾아 트리를 순회함.</li>\n<li>만약 두 트리가 다른 엘리먼트를 갖고 있는 경우 (<code class=\"language-text\">span</code> 엘리먼트에서 <code class=\"language-text\">div</code>엘리먼트로 바뀌는 경우) 이전 DOM 노드를 파괴하고 새 노드를 빌드함.</li>\n<li>list를 비교하는 경우, 위에서부터 확인하기 때문에 요소를 마지막에 넣는 경우는 문제가 없지만 요소를 앞에 넣는 경우는 list를 다시 작성해야 하는 완전히 새로운 list로 간주한다.\n<ol>\n<li>이를 방지하기 위해 <code class=\"language-text\">key</code> prop을 사용한다.</li>\n</ol>\n</li>\n</ol>\n<h2>Fiber</h2>\n<p>참고: <a href=\"https://github.com/acdlite/react-fiber-architecture\">https://github.com/acdlite/react-fiber-architecture</a></p>\n<p>리액트 렌더링/업데이트의 가장 작은 단위</p>\n<p>컴포넌트용 스택 프레임 (스택 프레임: 콜 스택에 추가되는 하나의 작업)</p>\n<p>효율적인 업데이트를 위해</p>\n<ul>\n<li>work를 중지하고, 필요 시 다시 시작할 수 있어야 한다.</li>\n<li>다른 종류의 work들에게 우선순위를 부여할 수 있어야 한다.</li>\n<li>이미 완료된 work를 재사용 할 수 있어야 한다.</li>\n<li>work가 더이상 필요 없게 되면 버릴 수 있어야 한다</li>\n</ul>\n<h2>Rendering process</h2>\n<h3>1. render phase</h3>\n<p>컴포넌트에서 발생하는 변경 사항이 Virtual DOM에 적용되는 단계</p>\n<p>이 단계에서는 아직 실제 DOM이 업데이트되지 않은 상태이므로, 렌더링 성능을 향상시키기 위한 최적화 작업이 가능하다.</p>\n<ol>\n<li><code class=\"language-text\">performUnitOfWork</code></li>\n<li><code class=\"language-text\">beginWork</code></li>\n<li><code class=\"language-text\">completeUnitOfWork</code></li>\n<li><code class=\"language-text\">completeWork</code></li>\n</ol>\n<p>render phase에서는 위와 같은 단계로 함수가 실행된다.</p>\n<ul>\n<li>current tree: 현재 브라우저에 보이는 DOM Tree</li>\n<li>work-in-progress tree: 업데이트 사항이 반영되는 중인 DOM Tree</li>\n</ul>\n<h3>2. commit phase</h3>\n<p>Virtual DOM에 업데이트된 내용이 실제 DOM에 반영되고 브라우저에서 화면이 업데이트되는 단계</p>\n<p>이 단계에서는 최적화가 불가능하므로 render phase에서 렌더링해야 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/01f4ba7534ae0e2abd4726f0794a2cce/d3f96/wanted1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.72151898734177%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtUlEQVR42j2OyQ7CQAxD51eQuHFEtJ22sy/dEPz/15h4qHqIoiT2c1Tdvgh5h/EL+tHDhRWjSXBxg5XdZDImyyqYXYGeIsY5ib6i0152FUaKOy8eRaCLawPoOaIXEbsW6CDmBjQnUIo7ghj6Gmy7Uc+wQboK5UCqb8R8/I9isGGBT5uYckvnpwydzllfH7prpu/ZGSgKg8DK+hHQ2o4EhbS3jxjEzhCaCKKGn/JLT51Ab/dHqx8J/osJgzRqmAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"\"\n        src=\"/static/01f4ba7534ae0e2abd4726f0794a2cce/f058b/wanted1.png\"\n        srcset=\"/static/01f4ba7534ae0e2abd4726f0794a2cce/c26ae/wanted1.png 158w,\n/static/01f4ba7534ae0e2abd4726f0794a2cce/6bdcf/wanted1.png 315w,\n/static/01f4ba7534ae0e2abd4726f0794a2cce/f058b/wanted1.png 630w,\n/static/01f4ba7534ae0e2abd4726f0794a2cce/40601/wanted1.png 945w,\n/static/01f4ba7534ae0e2abd4726f0794a2cce/d3f96/wanted1.png 1093w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>render 효율을 위해…</h3>\n<ul>\n<li>불필요한 js element를 없애는 것이 좋음\n<ul>\n<li>diffing시 모든 노드를 순회하기 때문</li>\n</ul>\n</li>\n<li>key를 잘 지정해줘야 함\n<ul>\n<li>key 없이 리스트 앞에 요소 넣기 x</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1>수업 외 Tip</h1>\n<ol>\n<li>이력서 열람할 수 있는 사이트 <a href=\"https://f-lab.kr/publish/resumes\">https://f-lab.kr/publish/resumes</a></li>\n<li>디바이스 별 반응형 볼 수 있는 사이트 <a href=\"https://responsivedesignchecker.com/\">https://responsivedesignchecker.com/</a></li>\n<li>커밋 작성법 <a href=\"https://blog.ull.im/engineering/2019/03/10/logs-on-git.html\">https://blog.ull.im/engineering/2019/03/10/logs-on-git.html</a></li>\n<li>좋은 코드를 많이 보기 - 센드버드, 리디 추천</li>\n</ol>\n<h2>아토믹 디자인 패턴이란?</h2>\n<p>참고: <a href=\"https://brunch.co.kr/@skykamja24/580\">https://brunch.co.kr/@skykamja24/580</a></p>\n<p>가장 작은 컴포넌트 단위를 원자(Atoms)로 설정하고, 이를 바탕으로 상위 컴포넌트를 만들어 재사용성을 최대화하는 방법론</p>\n<p>원자(Atoms) → 분자(Molecules) → 유기체(Organisms) → 템플릿(Templates) → 페이지(pages)</p>\n<ol>\n<li>원자\n<ol>\n<li>디자인과 기능의 최소 단위</li>\n<li><code class=\"language-text\">Label</code>, <code class=\"language-text\">Text</code>, <code class=\"language-text\">Container</code>, <code class=\"language-text\">Button</code>, <code class=\"language-text\">Icon</code> 컴포넌트</li>\n</ol>\n</li>\n<li>분자\n<ol>\n<li>입력 폼, 네비게이션, 카드 컴포넌트</li>\n</ol>\n</li>\n<li>유기체\n<ol>\n<li>입력 폼과 함께 헤더 감싸기, 여러 카드를 관리하는 그리드</li>\n</ol>\n</li>\n<li>템플릿\n<ol>\n<li>여러 카드 그리드를 묶은 컴포넌트</li>\n</ol>\n</li>\n</ol>\n<h3>아토믹 디자인 패턴의 단점</h3>\n<p>하위 컴포넌트에서 문제가 생기면 모든 상위 컴포넌트에 문제가 생길 수 있음</p>","frontmatter":{"title":"[원티드] React가 Virtual DOM을 활용하는 방법","date":"April 05, 2023","description":"원티드 프리온보딩 프론트엔드 챌린지 첫번째 강의","tags":["React","원티드 프리온보딩 챌린지"]}},"previous":{"fields":{"slug":"/2023/CSR-vs-SSR/"},"frontmatter":{"title":"CSR vs SSR"}},"next":{"fields":{"slug":"/2023/React-TypeScript/"},"frontmatter":{"title":"React에서 TypeScript 사용하기"}}},"pageContext":{"id":"7218b739-8933-5fad-99ab-260348bd3342","previousPostId":"6d56fec4-561d-562c-8508-8749bef496aa","nextPostId":"1cd3777b-f4a4-50d9-973b-794314f8584a"}},"staticQueryHashes":["230163734","2841359383"],"slicesMap":{}}