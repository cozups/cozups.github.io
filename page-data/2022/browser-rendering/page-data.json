{"componentChunkName":"component---src-templates-blog-post-js","path":"/2022/browser-rendering/","result":{"data":{"site":{"siteMetadata":{"title":"cozups-log"}},"markdownRemark":{"id":"8c6a02da-774d-5b95-9d32-cc546a33cb55","excerpt":"더 효율적인 클라이언트 사이드 자바스크립트 프로그래밍을 하기 위해 브라우저 환경에 대해 고려해야 한다. 따라서, 브라우저가 HTML, CSS, 자바스크립트로 작성된 텍스트 문서를 어떻게 파싱하여 렌더링하는지 알 필요가 있다. 파싱(parsing…","html":"<p>더 효율적인 클라이언트 사이드 자바스크립트 프로그래밍을 하기 위해 브라우저 환경에 대해 고려해야 한다.</p>\n<p>따라서, 브라우저가 HTML, CSS, 자바스크립트로 작성된 텍스트 문서를 어떻게 파싱하여 렌더링하는지 알 필요가 있다.</p>\n<h1>파싱(parsing)?</h1>\n<p>프로그래밍 언어의 문법에 맞게 작성된 <strong>텍스트 문서</strong>를 읽어 <strong>토큰</strong>으로 분해하고, 토큰에 문법적 의미와 구조를 반영하여 <strong>파스 트리</strong>를 생성하는 과정을 말한다. 파싱이 완료된 이후에는 파스 트리를 기반으로 <strong>바이트코드</strong>를 생성하고 실행한다.</p>\n<blockquote>\n<p>텍스트 문서 → 토큰 → 파스 트리 → 바이트코드</p>\n</blockquote>\n<p>💡 바이트코드: 가상 컴퓨터에서 돌아가는 실행 프로그램을 위한 이진 표현법</p>\n<h1>렌더링(rendering)?</h1>\n<p>HTML, CSS, 자바스크립트로 작성된 문서를 파싱하여 <strong>브라우저에 시각적으로 출력</strong>하는 것</p>\n<h1>브라우저의 렌더링 과정</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/73d5254071ec14fc7caee9445f6813ee/3dfa7/browser-render-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.49367088607595%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAD10lEQVR42gHMAzP8AJy621Wdt9RZkLvdU3+731qRudpUprq9Waa9v1mXudZRfqG7V36hu1d1n71dfaLCN+Lf31Hm5ORy29nXc8/S21Xnxl42/txmUv/aaEz/2mZNAJuzyWmbp7d9erDVYkim1IV6t9dgwLRzd7+0cXyXn7xgeIm2ao2YuVyng5ZpjIynQ3CFkjuOmaVEtcTNNJ7A6iXt0m85/9xkUf/aaEz/2mZNAJuyy2eYp7p6eqLIZkum04F7ut5dvrV5c7+5enWbkq9nfIW5cZibwly6eopwo4+nQAA8PBEoNUMTOjpODQAAAALx1Wo3/9xnUf/daUv/2mZNAJy3012gr8ZnjbLUWmO24WmLudxYsLicZaqqkW2kma9dnMjqS53F50yay/JPk8HqMgD//wRV//8GQ2uhExU4YyThx2o8+9piU/XVZE//2mZNAJqzzGWeq7p0gq/RYFSs2nZ/s9Zeu7mIbrWreXqWlKNij7TWUpCvzVOPr9NXjJmuPGArAB3MZiIP/38qDP9fAAj/1WE3vrBTbrGlUGz722RPAJmzzWKUqsRpf7ThVmKt0neJutVdsLKOaK2vhGqZvuNLfJ3AVnmWslp6l7RgjJ60OoxmMxS2f0gOmWYiDzgOABLxzV057cpgV+bCXlT41WRPAJrF8EeywLRuora+Y8HBqniwwr1ln8PzVafA5HuuvrpvqMPLXp/C31ChyO5PpbTNM8YcAAn/fzMKtGktEVsoKBn60WQ46s1jV9KzYGL73WZNAJ6+4U+5v651w8rAl8LHt66zwsiDwcOrjcPO2azIyK/BxsvEuMHJxqOixedYiK7BNjpXJCNvv18Qxv9xCVX/fwb/624ztLROe4OgRHrmzWBSAJvA5E2NuOlIjazOWrDC2Xurw+JrqMPbXqjD4We2xt2Cp8PlWqDA5FacvuZTnMDaMVV/AAYA/wACHBwACQAMABT11WY35M1mYfXMXFD/3WlLAJy/4lCbvd9SlbzhTbXP25HD0dKzwc/TjcLGtXq6xrxsoMvpXpnB40ufweZTkrjGNrnQmiHJ2bkwusmmNHyVginlyGA9/+VqT//ga0z72GZQAJzB5j6exOo9krTVRIimulavvch0tbvGhKLCuXGkxsmQs7XGep274TyiyOtCapTNJNLO1UrY1dh219fXdcLH2Tfx0Vsn4MJaTKuTRVXFqk5LAH9/fwIAAAAAGhoaEwAAACVpfVk/rXdTcS2av1Qzn+djvjRMP/8qAAYAAAAA/wAAAQAAAAAAAAAAAAAAAAAAAAEAAAAACQkAHAYGACoZGQAK634HGGvSW7wAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"browser-render-1\"\n        title=\"\"\n        src=\"/static/73d5254071ec14fc7caee9445f6813ee/f058b/browser-render-1.png\"\n        srcset=\"/static/73d5254071ec14fc7caee9445f6813ee/c26ae/browser-render-1.png 158w,\n/static/73d5254071ec14fc7caee9445f6813ee/6bdcf/browser-render-1.png 315w,\n/static/73d5254071ec14fc7caee9445f6813ee/f058b/browser-render-1.png 630w,\n/static/73d5254071ec14fc7caee9445f6813ee/40601/browser-render-1.png 945w,\n/static/73d5254071ec14fc7caee9445f6813ee/78612/browser-render-1.png 1260w,\n/static/73d5254071ec14fc7caee9445f6813ee/3dfa7/browser-render-1.png 2028w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>브라우저는 HTML, CSS, 자바스크립트, 이미지, 폰트 파일 등 렌더링에 필요한 리소스를 요청하고 서버로부터 응답을 받는다.</li>\n<li>브라우저 렌더링 엔진은 서버로부터 응답된 HTML과 CSS를 파싱하여 DOM과 CSSOM을 생성하고 이들을 결합하여 렌더 트리를 생성한다.</li>\n<li>브라우저의 자바스크립트 엔진은 서버로부터 응답된 자바스크립트를 파싱하여 AST(Abstract Syntax Tree)를 생성하고 바이트코드로 변환하여 실행한다. 이때 자바스크립트는 DOM API를 통해 DOM이나 CSSOM을 변경할 수 있다. 변경된 DOM과 CSSOM은 다시 렌더 트리로 결합된다.</li>\n<li>렌더 트리를 기반으로 HTML 요소의 레이아웃(위치와 크기)을 계산하고 브라우저 화면에 HTML 요소를 페인팅한다.</li>\n</ol>\n<h2>1. 요청과 응답</h2>\n<p>렌더링이 필요한 리소스는 모두 서버에 존재하므로 ①필요한 리소스를 서버에 요청하고 서버가 응답한 ②리소스를 파싱하여 렌더링한다.</p>\n<p>서버에 요청을 전송하기 위해 브라우저는 주소창을 제공한다.</p>\n<p><strong>브라우저의 주소창에 URL를 입력하고 엔터 키를 누르면 URL의 호스트 이름이 DNS를 통해 IP 주소로 변환되고 이 IP 주소를 갖는 서버에게 요청을 전송한다.</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ede8f0949e9812e102a29b34361c9185/06868/browser-render-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.316455696202528%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGElEQVR42k2Qu0oDQRSGPyWbzSa6mtncNlkN3lBSaOGFKIiFGFLZCYKFXRoJ3gqx2k5tRASbrQKWlhZpfQFLX8HnGOeMiebAx/nPf/4ZhoH4I0W373L0lv6jeelZRHc+HRZPfBotRaxTtJ9dm0+0Y/uQ016GTuJgQz2dsTxqj752acWK/buAL50m/s7anfiyF631OFFD2ceI/meMELKR76tgeadaWNkN1VKzVl49KNUbe5XqwsaMeLITX7T1ZtdDVduKpJfnt0sqWqvV65uVNrhcQ+4KCu/m4himRSdG30P+FsqvZn8GQReKLzDxZDI3MCXeMVTPzfxg5gsID2ESU5Fhjt8yf0BuRGcH2hswrLQhbwhGMkU5+wNwekntH+u7DQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"\"\n        src=\"/static/ede8f0949e9812e102a29b34361c9185/f058b/browser-render-2.png\"\n        srcset=\"/static/ede8f0949e9812e102a29b34361c9185/c26ae/browser-render-2.png 158w,\n/static/ede8f0949e9812e102a29b34361c9185/6bdcf/browser-render-2.png 315w,\n/static/ede8f0949e9812e102a29b34361c9185/f058b/browser-render-2.png 630w,\n/static/ede8f0949e9812e102a29b34361c9185/40601/browser-render-2.png 945w,\n/static/ede8f0949e9812e102a29b34361c9185/78612/browser-render-2.png 1260w,\n/static/ede8f0949e9812e102a29b34361c9185/06868/browser-render-2.png 1974w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>예를 들어,</p>\n<p><code class=\"language-text\">https://poiemaweb.com</code>을 입력하고 엔터 키를 누르면 루트 요청이 poiemaweb.com 서버로 전송된다.</p>\n<p><strong>루트 요청</strong>에는 명확히 리소스를 요청하는 내용은 없지만 서버가 암묵적으로 index.html을 응답하도록 기본적으로 설정되어 있다.</p>\n<p>만약 <strong>특정 정적 파일</strong>을 서버에 요청하려면 브라우저의 주소창에 요청할 정적 파일 경로와 파일 이름을 URI의 호스트 뒤의 path에 기술하여 요청해야 한다.</p>\n<p>예) <code class=\"language-text\">https://poiemaweb.com/assets/data/data.json</code></p>\n<p>서버에 동적으로 정적/동적 파일을 요청하기 위해서 Ajax와 REST API를 사용하기도 한다.</p>\n<p>브라우저의 렌더링 엔진은 HTML을 파싱하는 도중 외부 리소스를 로드하는 태그(<code class=\"language-text\">link</code>, <code class=\"language-text\">img</code>, <code class=\"language-text\">script</code> 등)를 만나면 HTML 파싱을 일시 중단하고 해당 리소스 파일을 서버로 요청한다.</p>\n<h2>2. HTML 파싱과 DOM 생성</h2>\n<ol>\n<li>서버는 브라우저가 요청한 HTML 파일을 읽어 메모리에 바이트(2진수)로 저장하고 인터넷을 경유하여 클라이언트에 응답한다.</li>\n<li>브라우저는 응답된 바이트 형태의 HTML 문서를 meta 태그의 charset 어트리뷰트에 지정된 인코딩 방식에 따라 문자열로 변환시킨다.\n<ul>\n<li>charset 어트리뷰트에 선언된 인코딩 방식은 content-type: text/html; charset=utf-8 과같이 응답 헤더에 담겨 응답된다.</li>\n</ul>\n</li>\n<li>문자열로 변환된 HTML 문서를 읽어들여 문법적 의미를 갖는 최소 단위인 **토큰(token)**들로 분해한다.</li>\n<li>각 토큰들을 객체로 변환하여 노드(node)들을 생성한다.\n<ul>\n<li>문서 노드, 요소 노드, 어트리뷰트 노드, 텍스트 노드</li>\n</ul>\n</li>\n<li>HTML 문서는 HTML 요소들의 집합으로 이루어지며 <strong>HTML 요소는 중첩 관계</strong>를 갖는다. 따라서 HTML 요소 간 부자 관계가 형성되고 이 부자 관계를 반영하여 모든 노드들을 <strong>트리 자료구조</strong>로 구성한다. 이 트리 자료구조를 <strong>DOM(Document Object Model)</strong>이라 부른다.</li>\n</ol>\n<h2>3. CSS 파싱과 CSSOM 생성</h2>\n<ol>\n<li>렌더링 엔진은 DOM을 생성해 나가다가 CSS를 로드하는 link 태그나 style 태그를 만나면 DOM 생성을 중단한다.</li>\n<li>link 태그의 href 어트리뷰트에 지정된 CSS파일을 서버에 요청하여 로드한 CSS파일이나 style 태그 내의 CSS를 HTML과 동일한 파싱 과정을 거치며 해석하여 CSSOM을 생성한다.\n<ul>\n<li>바이트 → 문자 → 토큰 → 노드 → CSSOM</li>\n<li>CSSOM은 CSS의 상속을 반영하여 생성된다.</li>\n</ul>\n</li>\n<li>CSS 파싱을 완료하면 HTML 파싱이 중단된 지점부터 다시 HTML을 파싱하기 시작하여 DOM 생성을 재개한다.</li>\n</ol>\n<h2>4. 렌더 트리 생성</h2>\n<p>렌더링 엔진에 의해 생성된 DOM과 CSSOM은 렌더 트리로 결합된다.</p>\n<p>렌더 트리는 렌더링을 위한 자료구조로 <strong>화면에 렌더링되는 노드만으로</strong> 구성된다.</p>\n<ul>\n<li>화면에 렌더링 되지 않는 노드: <code class=\"language-text\">meta</code>, <code class=\"language-text\">script</code> 태그 등</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/acc5c06f25409ddf62a7044ee3d02c40/0d98f/browser-render-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.32911392405063%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABUUlEQVR42nVSx2KEIBD1/z8tOeSyKaa5tihKHxAEkei6Jclu5sI0prw3SbySEIJzPt6SeZ5/msnqifMptCoaGlTeXez/Jdme0cswH7tpSzueXrqtVcKiDEa3XbMUDGE6ftaW1Ly7z4tGNBjIyxevGWrFmxpQwWQp/ZIspVxSlWUN/RRCcka9XzslfrKDs8rFwUEr8odaFIwwXac93dOuFjhjlig8em0cECiNMYjkzrvz2Otq3ipa7aSLQmBSPQofJVtm+qBjpJJyjpUCxvEwDFR0SkMIcxJ/LXcEblGcG/Nsr0Cdcd7gmw/RTU/+8nQKaK1fsx05tBpHs+G+Bq/RvkkqNaW2okcI434h/zZVAMA5ByCIpM+9qigIziRI1D+99zhFwBkDUJTlFSmeejNOYdsy2U5qmcZbDV1mp+BDOHgCoMwY5ULciB1Yq1hrw+XOvgErhX6QS8TQtQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"\"\n        src=\"/static/acc5c06f25409ddf62a7044ee3d02c40/f058b/browser-render-3.png\"\n        srcset=\"/static/acc5c06f25409ddf62a7044ee3d02c40/c26ae/browser-render-3.png 158w,\n/static/acc5c06f25409ddf62a7044ee3d02c40/6bdcf/browser-render-3.png 315w,\n/static/acc5c06f25409ddf62a7044ee3d02c40/f058b/browser-render-3.png 630w,\n/static/acc5c06f25409ddf62a7044ee3d02c40/40601/browser-render-3.png 945w,\n/static/acc5c06f25409ddf62a7044ee3d02c40/78612/browser-render-3.png 1260w,\n/static/acc5c06f25409ddf62a7044ee3d02c40/0d98f/browser-render-3.png 1276w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>완성된 렌더 트리는 HTML 요소의 레이아웃(위치와 크기)을 계산하는 데 사용되며 브라우저 화면에 픽셀을 렌더링하는 페인팅 처리에 입력된다.</p>\n<h3>레이아웃 계산과 페인팅이 재차 실행되는 경우</h3>\n<ul>\n<li>자바스크립트에 의한 노드 추가 또는 삭제</li>\n<li>브라우저 창의 리사이징에 의한 뷰포트 크기 변경</li>\n<li>HTML 요소의 레이아웃에 변경을 발생 시키는 스타일 변경\n<ul>\n<li><code class=\"language-text\">width/height</code>, <code class=\"language-text\">margin</code>, <code class=\"language-text\">padding</code>, <code class=\"language-text\">border</code>, <code class=\"language-text\">display</code>, <code class=\"language-text\">position</code>, <code class=\"language-text\">top/right/bottom/left</code> 등</li>\n</ul>\n</li>\n</ul>\n<p>레이아웃 계산과 페인팅을 다시 실행하는 것은 성능에 악영향을 주므로 빈번하게 발생하지 않도록 주의할 필요가 있다.</p>\n<h2>5. 자바스크립트 파싱과 실행</h2>\n<ol>\n<li>렌더링 엔진은 HTML을 한 줄씩 순차적으로 파싱하며 DOM을 생성해 나가다가 script 태그를 만나면 DOM 생성을 중단한다.</li>\n<li>자바스크립트 코드를 파싱하기 위해 자바스크립트 엔진에 제어권을 넘긴다.</li>\n<li>자바스크립트 파싱과 실행이 종료되면 렌더링 엔진으로 다시 제어권을 넘겨 HTML 파싱이 중단된 지점부터 다시 HTML 파싱을 시작한다.</li>\n<li>자바스크립트 엔진은 자바스크립트 코드를 파싱하여 저수준 언어로 변환하고 실행하는 역할을 한다.</li>\n</ol>\n<p>자바스크립트 엔진은 자바스크립트 코드를 해석하여 AST(abstract syntax tree)를 생성한다. AST를 기반으로 인터프리터가 실행할 수 있는 중간 코드인 바이트코드를 생성하여 실행한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/395d9cce223e02fb7e2c5ea5a401fb8f/c1328/browser-render-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.734177215189874%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABa0lEQVR42n2QS0vDQBSF+0fdCS4Ff4GCLty4dCu6EVwIbtxZsCIufCDFTS0WTG2S5jFJ5s4jMzcz8da0IFg8TGZO7tzvcJleu5JtaibiSmfeO986XmeFmlun6Qo0y0WkLJBXlpOXpiLfo897T/uMjy4eD/ujU/TGNPpmdHI1PAr5O10N3i/OBntv4S35Ydw/fzh4/rpewY0w8MnzSZzESRqqcoIyqIokSROjYiunSiRhFCmIdDVJo9F8HjvXLGHH7qd3W+nzroVK52P2tFO+bCN8ILbl637Y39DBFbZtPbv8GmzC+BgRu2GXYzdoESrMcszzmlcGayo6xCqcQjSzZUltQoAU0P5Srzu877IWElJwtWxKgc15XipOLWmWAayD21UGLSGEQdsVQEEBhbGGPGMsCALaaex1cAcAGFP/ZLVCCamF847+pJQFKyj6P1hr3TSLx3TOqVoZNB38V7211cZ5YZ1UGn5EcWvhbyMhOUxiqqi6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"\"\n        src=\"/static/395d9cce223e02fb7e2c5ea5a401fb8f/f058b/browser-render-4.png\"\n        srcset=\"/static/395d9cce223e02fb7e2c5ea5a401fb8f/c26ae/browser-render-4.png 158w,\n/static/395d9cce223e02fb7e2c5ea5a401fb8f/6bdcf/browser-render-4.png 315w,\n/static/395d9cce223e02fb7e2c5ea5a401fb8f/f058b/browser-render-4.png 630w,\n/static/395d9cce223e02fb7e2c5ea5a401fb8f/c1328/browser-render-4.png 866w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>토크나이징</h3>\n<p>자바스크립트 소스코드를 문법적 의미를 갖는 코드의 최소 단위인 토큰들로 분해하는 것</p>\n<h3>파싱</h3>\n<p>토큰들의 집합을 구문 분석하여 AST(추상적 구문 트리)를 생성하는 것</p>\n<p>AST는 토큰에 문법적 의미와 구조를 반영한 트리</p>\n<h3>바이트코드 생성과 실행</h3>\n<p>AST는 바이트코드로 변환되고 인터프리터에 의해 실행된다.</p>\n<p>V8 엔진의 경우, 자주 사용되는 코드는 최적화된 머신 코드로 컴파일되어 성능을 최적화하고 코드의 사용 빈도가 적어지면 다시 디옵티마이징 하기도 한다.</p>\n<h2>6. 리플로우와 리페인트</h2>\n<p>자바스크립트 코드에 DOM이나 CSSOM을 변경하는 DOM API가 사용된 경우 DOM이나 CSSOM이 변경된다.</p>\n<p>이때 변경된 DOM과 CSSOM은 다시 렌더 트리로 결합되고 변경된 렌더 트리를 기반으로 레이아웃(리플로우)과 페인트(리페인트) 과정을 거쳐 화면에 다시 렌더링 된다.</p>\n<blockquote>\n<p>리플로우: 레이아웃을 다시 계산하는 것</p>\n</blockquote>\n<blockquote>\n<p>리페인트: 재결합된 렌더 트리를 기반으로 다시 페인트하는 것</p>\n</blockquote>\n<p>레이아웃에 영향이 없는 변경은 리플로우 없이 리페인트만 실행된다.</p>\n<h2>7. 자바스크립트 파싱에 의한 HTML 파싱 중단</h2>\n<p>렌더링 엔진과 자바스크립트 엔진은 직렬적으로 파싱을 수행한다.</p>\n<p>위에서 아래로 순차적으로 HTML, CSS, 자바스크립트를 파싱하고 실행하기 때문에 script 태그의 위치에 따라 DOM 생성이 지연될 수 있다.</p>\n<h3>script 태그는 body 요소의 가장 아래에 두는 것이 좋다.</h3>\n<p>그 이유는</p>\n<ul>\n<li>DOM이 완성되지 않은 상태에서 자바스크립트가 DOM을 조작하면 에러가 발생할 수 있다.\n<ul>\n<li>script 태그를 body 요소의 가장 아래에 두면 DOM이 완성된 이후에 조작하기 때문에 이러한 문제가 발생할 우려가 없다.</li>\n</ul>\n</li>\n<li>자바스크립트 로딩/파싱/실행으로 인해 HTML 요소들의 렌더링에 지장받는 일이 발생하지 않아 페이지 로딩 시간이 단축된다.\n<ul>\n<li>자바스크립트 실행 전에 DOM 생성이 완료되어 렌더링 되므로 페이지 로딩 시간이 단축된다.</li>\n</ul>\n</li>\n</ul>\n<h2>8. script 태그의 async/defer 어트리뷰트</h2>\n<p>자바스크립트 파싱에 의한 DOM 생성이 중단되는 문제를 해결하기 위해 추가된 어트리뷰트</p>\n<ul>\n<li>async와 defer 어트리뷰트는 외부 자바스크립트 파일을 로드하는 경우에만 사용할 수 있다.</li>\n<li>async와 defer 어트리뷰트를 사용하면 외부 자바스크립트 파일의 로드가 비동기적으로 동시에 진행된다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/36d534d423148476cc23515887f60514/7e111/browser-render-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.06329113924051%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABR0lEQVR42pVR2Y7DIAzM//9it4d65IJwJ4BtyJpWK3Uf+lA0Qth4YDzujDGXy2Wa5v371Xnvr9ersZaDWolRKta98ME4NHY3bg9qK0qCM1SBChQu20sjI+K6rgDAgfHTKO5iGcfhPIpbzJFob0B+EGOyG9iEXqheLEMj55xDCMy31oY1ACAhQc58+KSWqCBSIyulD4fDo++5c+7/vYjVvJDhLVtrS1F7utu2TYiZdw5iMtYLFxbrZhuk1GZejFANMdsGcOsm13nIz2+6UlgDEmGt1QetjHbOKzlro/fmCj2BTyPpZZVfg/O+kbXW59NpGIbjz1HK5btRsVvMZMNYAmCi8kJGyouJUkWhE6uvi0x2wZKQWkGpzYaOh8R89pwDZYZ+vAkx9ffjMN0SrDGHmD2DB58hJPBA2ywfs+wbef9v5Ds+rr/bX5dkf2UphRL+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"\"\n        src=\"/static/36d534d423148476cc23515887f60514/f058b/browser-render-5.png\"\n        srcset=\"/static/36d534d423148476cc23515887f60514/c26ae/browser-render-5.png 158w,\n/static/36d534d423148476cc23515887f60514/6bdcf/browser-render-5.png 315w,\n/static/36d534d423148476cc23515887f60514/f058b/browser-render-5.png 630w,\n/static/36d534d423148476cc23515887f60514/40601/browser-render-5.png 945w,\n/static/36d534d423148476cc23515887f60514/78612/browser-render-5.png 1260w,\n/static/36d534d423148476cc23515887f60514/7e111/browser-render-5.png 1627w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>async 어트리뷰트</h3>\n<ul>\n<li>HTML 파싱과 외부 자바스크립트 파일의 로드가 비동기적으로 동시에 진행</li>\n<li>자바스크립트의 파싱과 실행은 파일의 로드가 완료된 직후에 진행 → HTML 파싱 중단</li>\n<li>로드가 완료된 자바스크립트부터 먼저 실행되므로 순서가 보장되지 않는다.</li>\n</ul>\n<h3>defer 어트리뷰트</h3>\n<ul>\n<li>HTML 파싱과 외부 자바스크립트 파일의 로드가 비동기적으로 동시에 진행</li>\n<li>자바스크립트의 파싱과 실행은 HTML 파싱이 완료된 직후에 진행된다.</li>\n<li>HTML에 추가된 순(상대순, 요소순)으로 실행</li>\n</ul>","frontmatter":{"title":"3. 브라우저의 렌더링 과정","date":"November 08, 2022","description":"모던 자바스크립트 Deep Dive [38장]","tags":["Javascript","모던 자바스크립트 Deep Dive"]}},"previous":{"fields":{"slug":"/2022/Spread-destructuring/"},"frontmatter":{"title":"2. Spread 문법과 destructuring 할당"}},"next":{"fields":{"slug":"/2022/property-attribute/"},"frontmatter":{"title":"4. 프로퍼티 어트리뷰트"}}},"pageContext":{"id":"8c6a02da-774d-5b95-9d32-cc546a33cb55","previousPostId":"bfebc8e1-d1a3-5f30-8d62-d0c0e8fc9bec","nextPostId":"1a7aac3a-63e5-5913-8cd7-f6d2f62ea71a"}},"staticQueryHashes":["230163734","2841359383"],"slicesMap":{}}